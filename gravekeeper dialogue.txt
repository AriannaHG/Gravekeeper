--ari_gravekeeper_port (Deadlight Brew Reeve cafe dialog)
[DialogNodeOverride] ID=reeve_cafe_party_dialog_ari_gravekeeper_port;
dialogNodeID_toOverride=cafe_party_dialog;
completeOverride=true;
overrideSpecialEffects=false;
fReq=party:reeve - g1:D_reeve_cafe_party_dialog_ari_gravekeeper_port + loc:ari_gravekeeper_port - 1;
speakerOverride=reeve;
specialEffect=delayDialog,3;
specialEffect=noSpeechFXLookOrAnim;
animations=happy;
animations=sly;
animations=meh;
animations=scared;
animations=stern;
statements=I wasn't expecting it from our surroundings...<p> but this coffee looks really fancy!;
statements=Smells nice and minty, too. I wonder why it's got such a dramatic name...;
statements=<speed=0.7>... *slurp*;
statements=W-wow...!<p> T-<p>this brew's to die for, but my heart feels like it's gonna give out.;
statements=I...<p=2> I think you'd better finish this for me.;
nextNodeID=endCafeTalk;

---City Path (valley) Reeve entry dialog
[DialogNode] ID=reeve_ari_gravekeeper_city_path_dialog1a;
animations=scared;
animations=sigh;
animations=stern;
statements=<color=DarkOliveGreen>-<p>cough-;
statements=I don't feel too good...<p> hope I'm not coming down with something.;
statements=Well, no sense in waiting around.;
nextNodeID=;

---Dialogue for combat start in Creeping Death zones
[DialogNode] ID=shana_creeping_death_combat_start_message;
animations=scared;
statements=Rot seeps from unseen wounds...;
nextNodeID=;

---------------------------------------------taidondialog


--todo untargetable graveyard path

--todo maybe make an introhandler dialog node?

--todo one more check to make sure DialogNode has nextNodeID and DialogOption has nodeToConnectTo
[DialogNode] ID=shana_dialog_taidonintro1; --Before any quest progress
animations=stern;
animations=meh;
animations=happy;

statements=Bah, I've nothing to offer you right now.;
statements=Go talk to Arianna if you must, that girl can talk anyone's ear off.;
statements=Not very good at hiding things, but I wouldn't say that to her face!;
specialEffect=incDefaultNode; --default node was taidonintro1, after this it'll be 2
nextNodeID=;

[DialogNode] ID=shana_dialog_taidonintro2;
animations=meh;
Go talk to Arianna if you must, that girl can talk anyone's ear off.;
nextNodeID=;
--todo after talking to Ari and accepting the quest, change taidons dialogue to shana_dialog_taidon1
--todo specialEffect=setActorDialogNodeId,human_ari_gravekeeper_port_1,shana_dialog_taidonhandler;
--todo ari mentions taidon may have something to say

[DialogNode] ID=shana_dialog_taidonhandler;
statements=Good, this is shana_dialog_taidonhandler;
nextNodeID=;
--todo checks for all the reaction nodes in happy path order
--reaction nodes redirect to this node. the last check goes to shana_dialog_taidon1

[DialogNode] ID=shana_dialog_taidon1; --todo textif based on prog
animations=stern;
statements=So you're the fools Arianna roped into solving our undead issue, eh?;

[DialogOption] text=Know anything useful?;
animations=sly;
nodeToConnectTo=shana_dialog_taidon1a_ask;

[DialogOption] text=Which night?;
animations=stern;
nodeToConnectTo=shana_dialog_taidon1a_night;

[DialogOption] text=Gate?;
animations=meh;
formulaReq=g:shana_asked_taidon_night;
nodeToConnectTo=shana_dialog_taidon1a_gate;

[DialogOption] text=What's so bad about Old Barrow?;
animations=meh;
formulaReq=g:shana_asked_taidon_night;
nodeToConnectTo=shana_dialog_taidon1a_old_barrow;

[DialogOption] text=If it's so dangerous, why not ask Jascias for help?;
animations=sly;
formulaReq=g:shana_asked_taidon_old_barrow;
nodeToConnectTo=shana_dialog_taidon1a_jascias;

[DialogOption] text=You're not worried about living so near Old Barrow?;
animations=sly;
formulaReq=g:shana_asked_taidon_old_barrow;
nodeToConnectTo=shana_dialog_taidon1a_old_barrow_worried_b;

nodeToConnectTo=shana_dialog_taidon1a_old_barrow_worried_a;

[DialogOption] text=Got some news for you.;
animations=happy;
nodeToConnectTo=shana_dialog_taidon1a_news;

[DialogOption] text=Ok, bye.; --todo change all leave texts, I think it was leave?
nodeToConnectTo=;
bottomOption=true;

[DialogNode] ID=shana_dialog_taidon1a_ask;
animations=sly;
animations=sigh;
statements=Word to the wise, the <iconBig=icon_gravekeeper_rot>Rot can be dispelled.;
statements=Don't know how I'd have survived that night in Old Barrow without <iconBig=classIcon_minstrel>Lenore and <iconBig=classIcon_sage>Skelter...;
nodeToConnectTo=shana_dialog_taidon1;

--todo sequential dialogue options

[DialogNode] ID=shana_dialog_taidon1a_night;--Which night?
animations=stern;
animations=sigh;
animations=stern;
animations=stern;
statements=I'm not going to ruin my mood by talking about that night. Ask Arianna if you're so curious.;
statements=Just stay away from that gate at the north end of the graveyard if you know what's good for you.;
statements=Old Barrow's better off forgotten, and Arianna says whatever's raising the undead in our graveyard has nothing to do with it.;
statements=If it did, we'd have long abandoned this town.;
specialEffect=setGlobalVar,shana_asked_taidon_night,1;
nextNodeID=shana_dialog_taidon1_anythingelse;

[DialogNode] ID=shana_dialog_taidon1a_gate;--Gate?
animations=angry;
animations=stern;
animations=stern;
animations=stern;
animations=sly;
animations=sigh;
statements=Feh!<p><p> I've tried to repair that gate many times now.;
statements=Every time, the next day it'd be as if I hadn't touched the thing.;
statements=Even smashed it to bits with my hammer as I've seen your type do, dragged the pieces back here.;
statements=Came back next morning to find a new gate in place, just as damaged as before.;
statements=Almost seems like Old Barrow's trying to lure the clever ones in...<p> but the truly smart wouldn't entertain it.;
statements=To be fair, I know your sort. Put something like that in your way, and it's like Bullion to a merchant.;
nextNodeID=shana_dialog_taidon1_anythingelse;


[DialogNode] ID=shana_dialog_taidon1a_old_barrow;--what's so bad about Old Barrow?
animations=angry;
animations=sigh;
animations=stern;
statements=Bah!<p><p> You young'uns think you're invincible, don't you?;
statements=You go in there...<p> you're not coming out.;
statements=Don't say I didn't warn you.;
specialEffect=setGlobalVar,shana_asked_taidon_old_barrow,1;

[DialogOption] text=I make no promises, old man.;
animations=meh;
nodeToConnectTo=shana_dialog_taidon1a_old_barrow_eager;

[DialogOption] text=Sure, I'll stay away.;
animations=stern;
nodeToConnectTo=shana_dialog_taidon1a_old_barrow_caution;

[DialogOption] text=You didn't answer my question though?;
animations=sly;
nodeToConnectTo=shana_dialog_taidon1a_old_barrow_none_returned;

[DialogNode] ID=shana_dialog_taidon1a_old_barrow_eager;
animations=sigh;
animations=meh;
animations=stern;
animations=sad;
animations=sad;
statements=Can't change your mind, I suppose.;
statements=At least mark the tally on the fence before you enter, you'll know it when you see it.;
statements=Seems like whatever's responsible for the gate doesn't mind the warning I stuck there.;
statements=And...<p> if you happen to come across an undead Fareem in there, please tell her there's nothing to forgive.;
statements=It's not like she had a choice, being controlled by the plague and all.;
specialEffect=setGlobalVar,shana_taidon_message,1;
nextNodeID=shana_dialog_taidon1_anythingelse;

[DialogNode] ID=shana_dialog_taidon1a_old_barrow_caution;
animations=happy;
animations=meh;
animations=sigh;
statements=Well, least you're one of the smart ones.;
statements=Not like that bunch of Gatekeepers who came by with a stick up their bums.;
statements=Didn't even bring a <iconBig=classIcon_sage>Sage with them, the fools.;
nextNodeID=shana_dialog_taidon1_anythingelse;

[DialogNode] ID=shana_dialog_taidon1a_old_barrow_none_returned;
animations=sigh;
animations=sigh;
animations=stern;
animations=sad;
statements=Fine.<p> Can't really tell you much, on account of nobody coming back after venturing in there.;
statements=All I know is a virulent plague befell us that night, one that <iconBig=icon_gravekeeper_rot>rotted the flesh off peoples' bones and raised them under its command.;
statements=Dispelling the victim staved off the plague's symptoms for a time, but it didn't stop until we were well clear of the city limits.;
statements=...<p>I say "we", but only a few of us made it out alive.;
nextNodeID=shana_dialog_taidon1_anythingelse;

[DialogNode] ID=shana_dialog_taidon1a_jascias;--ask Jascias for help?
animations=sigh;
animations=meh;
animations=meh;
animations=sigh;
statements=We tried, yes.;
statements=They sent the most gaudily dressed sailors I've ever seen, and we got to watch them set up a scrying ritual of some sort.;
statements=Said something about the grapes needing time to ripen, then washed their hands of the entire thing before leaving.;
statements=Useless bunch of kooks if you ask me.;
nextNodeID=shana_dialog_taidon1_anythingelse;

[DialogNode] ID=shana_dialog_taidon1a_old_barrow_worried_a;--todo option: You're not worried about living so close to Old Barrow? (main node, shana_asked_taidon_old_barrow)
animations=sly;
statements=See, that's different - bad as that night was, the place hasn't done anything to us since. Live and let live, that's what I always say.;
nextNodeID=shana_dialog_taidon1_anythingelse;

[DialogNode] ID=shana_dialog_taidon1a_old_barrow_worried_b;--todo same option but barrow 3 cleared
animations=happy;
animations=happy;
animations=stern;
animations=meh;
animations=sly;
statements=Well now, why'd I be worried about that?;
statements=You've already ripped its heart out - without that book, the plague's not coming back.;
nextNodeID=shana_dialog_taidon1a_old_barrow_worried_b2;
nextNodeID_fReq=g:ari_dead_lich;
nextNodeID=shana_dialog_taidon1a_old_barrow_worried_b1;

[DialogNode] ID=shana_dialog_taidon1a_old_barrow_worried_b1;
statements=Now go nip the immediate problem in the bud before we get a repeat of what happened that night, y'hear me? Shouldn't be too much of a challenge for you.;
nextNodeID=shana_dialog_taidon1_anythingelse;

[DialogNode] ID=shana_dialog_taidon1a_old_barrow_worried_b2;
statements=Y'know, I definitely wouldn't put it past that Lich to try recreating the events of that night once its body regenerates.;
statements=Maybe you should do something about that? Shouldn't be too much of an issue for you.;
nextNodeID=shana_dialog_taidon1_anythingelse;


-----------TAIDON REACTIONS-----------
[DialogNode] ID=shana_dialog_taidon_reaction_abombutnotlich;--after abom but not lich
statements=That Abomination may have been taken care of, and you have my thanks...;
statements=<fast, angry>but an old man like me can't sleep knowing something's actively raising the dead right next to us!;
statements=Didn't think you whippersnappers were the type to leave a job half done.;
statements=If my back didn't ache so much I'd go into the tomb myself!.;
statements=<sly> I'd check for a basement if I were you...<p> I know the place has one.;
nextNodeID=shana_dialog_taidon1_reactionhandler;


[DialogNode] ID=shana_dialog_taidon_reaction_lichdefeated;-- after lich beaten but not yeeted
statements=<happy>Heard about what you did. Well done!
statements=<happy>That Lich likely won't be back for a good, long while, and it'll be someone else's problem by then.;
nextNodeID=shana_dialog_taidon_reaction_lichdefeated_a;
nextNodeID_fReq=1-g:ari_dead_ascetic;                        --barrow 3 not cleared
nextNodeID=shana_dialog_taidon_reaction_lichdefeated_b;

[DialogNode] ID=shana_dialog_taidon_reaction_lichdefeated_a; --barrow 3 not cleared
fReq=;
statements=I think you can consider your job done...<p> wouldn't go for extra credit if I were you.;

[DialogOption] text=Extra credit?;
animations=sly;
nodeToConnectTo=shana_dialog_taidon_reaction_lichdefeated_extracredit;
[DialogOption] text=Always happy to help.;
animations=happy;
nodeToConnectTo=shana_dialog_taidon1_reactionhandler;
bottomOption=true;

[DialogNode] ID=shana_dialog_taidon_reaction_lichdefeated_extracredit;
animations=stern;
statements=Don't worry 'bout it. You've done enough, and I'm grateful for the help you've given our little town.;
nextNodeID=shana_dialog_taidon1_reactionhandler;

[DialogNode] ID=shana_dialog_taidon_reaction_lichdefeated_b;
animations=happy;
statements=Now, if you wanted you could <textIf=head to a Temple, purify that book<itemBig=shana_deadbook> you looted from the old church and =lessThan:2:g:arianna_gravekeeper_phylactery_quest>blast that Lich to smithereens<textIf= using that book<itemBig=ari_grimoire_divinity> you purified=moreThan:1:g:arianna_gravekeeper_phylactery_quest>!;
nextNodeID=shana_dialog_taidon1_reactionhandler;


[DialogNode] ID=shana_dialog_taidon_reaction_barrow1_normal; -- after barrow 1 no message
animations=surprised;
animations=meh;
animations=sigh;
animations=sigh;
animations=sad;
statements=Huh.<p> Well, that's the first time I've seen a crew venture past that gate and live to tell the tale.;
statements=You met Yokaze? I 'member her, poor girl was beside herself after she got reanimated.;
statements=Fought like a snaevar against the plague's control, telling us to run and leave her behind.;
statements=Her arrows claimed quite a few of us when she succumbed - but it could have been so much worse.;
statements=Least she's at peace now.;
nextNodeID=shana_dialog_taidon1_reactionhandler;

[DialogNode] ID=shana_dialog_taidon_reaction_barrow1_message; -- after barrow 1 if taidon asked
animations=surprised;
animations=meh;
animations=sigh;
animations=sigh;
animations=sad;
statements=Huh.<p> Well, that's the first time I've seen a crew venture past that gate and live to tell the tale.;
statements=You met Yokaze? I 'member her, poor girl was beside herself after she got reanimated.;
statements=Fought like a snaevar against the plague's control, telling us to run and leave her behind.;
statements=Her arrows claimed quite a few of us when she succumbed - but it could have been so much worse.;
statements=Did she receive my message?;
nextNodeID=shana_dialog_taidon1_reactionhandler;

[DialogOption] text=She told me to thank you on her behalf.;
animations=meh;
formulaReq=g:shana_yokaze_reply;
nodeToConnectTo=shana_dialog_taidon_reaction_yokaze_message;
[DialogOption] text=I delivered it to her. (Lie);
animations=meh;
formulaReq=g:shana_yokaze_reply;
nodeToConnectTo=shana_dialog_taidon_reaction_yokaze_message_lie;
[DialogOption] text=I didn't deliver your message.;
animations=sigh;
nodeToConnectTo=shana_dialog_taidon1_reaction_didntdeliver;
bottomOption=true;

[DialogNode] ID=shana_dialog_taidon_reaction_yokaze_message; -- after barrow 1 if yokaze message
animations=sad;
animations=sad;
statements=If she were here I'd tell her it's the least I could do.;
statements=I hope it helped make her final years bearable.;
nextNodeID=shana_dialog_taidon1_reactionhandler;

[DialogNode] ID=shana_dialog_taidon_reaction_yokaze_message_lie; -- after barrow 1 if yokaze message
animations=stern;
animations=sad;
statements=...;
statements=Least she's at peace now.;
nextNodeID=shana_dialog_taidon1_reactionhandler;

[DialogNode] ID=shana_dialog_taidon1_reaction_didntdeliver; -- after barrow 1 if yokaze message
animations=stern;
animations=sad;
statements=...;
statements=Least she's at peace now.;
nextNodeID=shana_dialog_taidon1_reactionhandler;


[DialogNode] ID=shana_dialog_taidon_reaction_barrow3;--after barrow 3.
statements=...<p><p>;
statements=Well, I won't lie.;
statements=Thought you were a bunch of fools headed to their deaths.;
statements=S'ppose that shows how much I know about the world.;
statements=;
nextNodeID=shana_dialog_taidon_reaction_barrow3a; --lich not yeeted
nextNodeID_fReq=isNot:3:g:arianna_gravekeeper_phylactery_quest;
nextNodeID=shana_dialog_taidon_reaction_barrow3b; --lich yeeted

[DialogNode] ID=shana_dialog_taidon_reaction_barrow3a;--lich not yeeted.
statements=Now go <textIf=purify that <itemBig=shana_deadbook>book you got from the old church and <textIf=show whatever's been raising the dead what for!=lessThan:2:g:arianna_gravekeeper_phylactery_quest><textIf=show that Lich what for!=moreThan:1:g:arianna_gravekeeper_phylactery_quest>;
statements=Shouldn't be particularly dangerous to you lot, at this point.;
nextNodeID=shana_dialog_taidon1_reactionhandler;

[DialogNode] ID=shana_dialog_taidon_reaction_barrow3b;--lich yeeted
statements=Seems like we won't have to worry the undead any more, all thanks to you.
statements=My old bones felt it from all the way up here! Good riddance to bad rubbish, that's what I like to say.;
--todo increment default node? this would lead to
nextNodeID=shana_dialog_taidon_finalhandler;

[DialogNode] ID=shana_dialog_taidon_finalhandler;
nextNodeID=shana_dialog_taidon_final_foul;
nextNodeID_fReq=partyItem:ari_gk_foul_remnant;
nextNodeID=shana_dialog_taidon_final;

[DialogNode] ID=shana_dialog_taidon_final_foul;
statements=<rand=An old man like me has nothing more to offer you heroes, but you're welcome here anytime./Come to keep an old man company, eh?/Guess I can look forward to living the rest of my days out in peace.>;
[DialogOption] text=Anything I can do with this <itemBig_low=ari_gk_foul_remnant>Foul Remnant?;
nodeToConnectTo=shana_dialog_taidon_final_remnant;
[DialogOption] text=Goodbye.;
nodeToConnectTo=;
bottomOption=true;

[DialogNode] ID=shana_dialog_taidon_final_remnant;
statements=That's more Arianna's thing than mine, but if what she's been telling me is correct, you might be able to recreate that relic's corrupted form by slamming it into a <itemBig_low=ari_grimoire_dusty>Dusty Book.;
statements=Can't for the life of me explain how that works, but you might be able to make one out of some <itemBig=bone_dust>Bone Dust.;
statements=Pretty sure she had one buried somewhere too, but what do I know?;
nextNodeID=;

[DialogNode] ID=shana_dialog_taidon_final;
statements=<rand=An old man like me has nothing more to offer you heroes, but you're welcome here anytime./Come to keep an old man company, eh?/Guess I can look forward to living the rest of my days out in peace.>;
nodeToConnectTo=;

[DialogNode] ID=ari_dialog_taidonchatter2; --tips for mausoleum todo include this somehow
animations=meh;
statements=<rand=You should probably have a way to dispel the <iconBig=icon_gravekeeper_rot>Rot./Undead can't stand Life magic, but using Ruin on them is a fool's errand./Some weapons and spells are uniquely effective against the undead.>;
nodeToConnectTo=;

-------------------------------------------------------------------end todo

[DialogNode] ID=ari_dialog_zombchatter;
animations=stern;
statements=<rand=Hey, did you notice anything sticking out of the ground near Arianna's house?/Be careful at night around here./Don't stray too close to the graveyard up north./We don't normally get visitors here...>;
nodeToConnectTo=;


[DialogNode] ID=ari_gravekeeper_arianna_greeting;
animations=;
statements=Well hello. We don't get many visitors around here and those we do get tend not to stay after their first night.;
specialEffect=incDefaultNode;
[DialogOption] text=What happens on their first night?;
nodeToConnectTo=ari_gravekeeper_arianna_firstnight;
[DialogOption] text=OK, bye.;
nodeToConnectTo=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_greeting1;
animations=sly;
statements=Still around, eh? How's the night been treating you?;
[DialogOption] text=And what goes on at night around here?;
formulaReq=;
nodeToConnectTo=ari_gravekeeper_arianna_graveyardinfest;
[DialogOption] text=Goodbye.;
nextNodeID=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_firstnight;
animations=sigh;
statements=Well, it's not so much their first night as what goes on at night around here.;
[DialogOption] text=And what goes on at night around here?;
nodeToConnectTo=ari_gravekeeper_arianna_graveyardinfest;
[DialogOption] text=Oh OK, bye.;
nextNodeID=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_graveyardinfest;
animations=sigh;
animations=;
statements=I'm not quite sure what's been causing it myself, but our graveyard tends to become a bit unruly at night.;
statements=We typically lock it off for good measure, but you're free to take this key and open the gate if you'd like.;
[DialogOption] text=I'd be happy to investigate.;
nodeToConnectTo=ari_gravekeeper_arianna_graveyardkey;
[DialogOption] text=I don't do well with that kind of stuff, thanks.;
nextNodeID=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_graveyardkey;
animations=angry;
animations=sly;
statements=Alright, feel free to grab the key from inside my house right here. But don't say that I didn't warn you.;
statements=Would you do me a favor and come see me if you manage to find out what's going on?;
specialEffect=incDefaultNode;
nextNodeID=ari_gravekeeper_arianna_getkey;

[DialogNode] ID=ari_gravekeeper_arianna_getkey;
specialEffect=setGlobalVar,ari_graveyard_key,1;
nextNodeID=;


[DialogNode] ID=ari_gravekeeper_arianna_greeting2;
animations=sly;
statements=Did you find anything?;
[DialogOption] text=I managed to fend off a hulking Abomination. <n=>It looked like it might have been ordering those Undead around.;
formulaReq=g:ari_dead_abomination;
nodeToConnectTo=ari_gravekeeper_arianna_graveyardabominationdead;
[DialogOption] text=Nothing yet.;
nodeToConnectTo=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_graveyardabominationdead;
animations=sly;
animations=;
animations=;
animations=sigh;
animations=;
animations=sigh;
statements=A *what*?;
statements=What did it look like?!;
statements=How was it ordering Undead around?;
statements=What was it made ou- No, that isn't what matters right now.;
statements=If there was an Abomination around then we need to figure out what brought it about.;
statements=I have a request, visitor. <n=>I know this is asking for quite a bit, and I apologize. <n=>Could you go back and see if you can figure out how the Abomination got there?;
[DialogOption] text=It felt like I had some unresolved business back down<n=> there. I'll go take a look.;
nodeToConnectTo=ari_gravekeeper_arianna_graveyardlich_quest_accept0;
[DialogOption] text=Sorry, but that's asking for too much.;
nodeToConnectTo=ari_gravekeeper_arianna_graveyardlich_quest_decline0;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_graveyardlich_quest_accept0;
animations=happy;
animations=stern;
statements=Much thanks, visitor.;
statements=Just promise me that you won't try to replicate what you've been seeing here. <n=>This kind of magic is cursed.;
specialEffect=incDefaultNode;
[DialogOption] text=Unlock <iconBig=classIcon_ari_gravekeeper> Gravekeeper.;
nodeToConnectTo=ari_gravekeeper_arianna_gravekeeper_accept_learn;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_graveyardlich_quest_decline0;
animations=sigh;
animations=stern;
statements=I understand. But visitor, what you've seen here...;
statements=Don't go trying to replicate this kind of magic. It's some cursed stuff.;
specialEffect=incDefaultNode;
[DialogOption] text=Unlock <iconBig=classIcon_ari_gravekeeper> Gravekeeper.;
nodeToConnectTo=ari_gravekeeper_arianna_gravekeeper_decline_learn;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_gravekeeper_accept_learn;
specialEffect=setGlobalVar,class_gravekeeper,1;
specialEffect=tTextOverlayPopup_classUnlocked;
specialEffect=incDefaultNode;
nextNodeID=;

[DialogNode] ID=ari_gravekeeper_arianna_gravekeeper_decline_learn;
specialEffect=setGlobalVar,class_gravekeeper,1;
specialEffect=tTextOverlayPopup_classUnlocked;
nextNodeID=;

[DialogNode] ID=ari_gravekeeper_arianna_greeting3;
animations=;
statements=Hey visitor, have you come back to tell me you'll take a look at where that Abomination came from?;
[DialogOption] text=Alright, I'll go take a look.;
nodeToConnectTo=ari_gravekeeper_arianna_graveyardlich_quest_accept1;
[DialogOption] text=Sorry, but no.;
nodeToConnectTo=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_graveyardlich_quest_accept1;
animations=happy;
animations=stern;
statements=Much thanks, visitor.;
statements=Just remember- Don't try to recreate anything you've been seeing around here.;
specialEffect=incDefaultNode;
[DialogOption] text=Bye.;
nodeToConnectTo=;
bottomOption=true;


[DialogNode] ID=ari_gravekeeper_arianna_greeting4;
animations=sly;
statements=Did you figure out where that Abomination came from?;
[DialogOption] text=There was a Lich down there!;
formulaReq=g:ari_dead_lich;
nodeToConnectTo=ari_gravekeeper_arianna_graveyardlichdead;
[DialogOption] text=Not yet.;
nodeToConnectTo=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_graveyardlichdead;
animations=happy;
animations=sly;
animations=sly;
animations=angry;
animations=sigh;
animations=sigh;
animations=;
animations=sly;
statements=Wow! A *Lich*?!;
statements=What did it look like?!;
statements=Was it strong?;
statements=How did you make it out alive?!;
statements=Did you bring back any curs- Sorry, I nearly lost myself there.;
statements=If you took out a Lich, that should have been the commander.<n=>I doubt we'll run into any major trouble from here on out.;
statements=You did destroy its Phylactery, right?;
[DialogOption] text=You sure know quite a bit about this.;
nodeToConnectTo=ari_gravekeeper_arianna_graveyardlich_accusation;
--[DialogOption] text=Phylactery?;
--newLineOfOptions=true;
--nodeToConnectTo=ari_gravekeeper_arianna_graveyard_phylactery;
[DialogOption] text=I think my work here is done.;
nodeToConnectTo=ari_gravekeeper_arianna_quest_complete;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_graveyardlich_accusation;
animations=angry;
animations=stern;
animations=;
statements=No, I- What? No-;
statements=I just have a mild interest in commanding legions of devoted followers that would throw themselves at your enemies for you.;
statements=That's all. But who wouldn't be interested in something like that?;
--[DialogOption] text=Phylactery?;
--nodeToConnectTo=ari_gravekeeper_arianna_graveyard_phylactery;
[DialogOption] text=I think my work here is done.;
nodeToConnectTo=ari_gravekeeper_arianna_quest_complete;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_graveyard_phylactery;
animations=;
animations=sigh;
animations=;
statements=That's right, a Lich's Phylactery houses their soul.;
statements=Without destroying the source of a Lich's soul, it will end up returning at some point in the future and we'll be back to square one.;
statements=However, I'm not sure we have the capacity to destroy such an object right now. Maybe we can come up with a solution.;
[DialogOption] text=You sure know quite a bit about this.;
nodeToConnectTo=ari_gravekeeper_arianna_graveyardlich_accusation;
[DialogOption] text=Is there anything that can destroy it?;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_quest_prompt;
[DialogOption] text=Thanks for the information.;
nodeToConnectTo=ari_gravekeeper_arianna_quest_complete;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_quest_complete;
animations=happy;
animations=happy;
statements=It's a good thing you ran across this little Port, visitor. We're few, but we truly appreciate your efforts in resolving this!;
statements=And for that, thank you!;
specialEffect=incDefaultNode;
[DialogOption] text=Unlock <iconBig=icon_gravekeeper_lichdom_elite>Lichdom Elite passive.;
nodeToConnectTo=ari_gravekeeper_arianna_lichdom_learn;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_lichdom_learn;
specialEffect=setGlobalVar,class_gravekeeper_lichdom,1;
specialEffect=setGlobalVar,grimoire_unlock,1;
specialEffect=markTrainerLocDone;
nextNodeID=;

[DialogNode] ID=ari_gravekeeper_arianna_greeting5;
animations=happy;
animations=sly;
statements=Hey visitor, glad to see you around!;
statements=Did I mention that Phylactery to you?;
[DialogOption] text=Phylactery?;
nodeToConnectTo=ari_gravekeeper_arianna_graveyard_phylactery_post;
[DialogOption] text=Bye.;
nodeToConnectTo=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_graveyard_phylactery_post;
animations=;
animations=sigh;
animations=;
statements=Right, a Phylactery is an object that houses a soul.;
statements=Without destroying the source of a Lich's soul, it will end up returning at some point in the future and we'll be back to square one.;
statements=But I'm not sure we have the capacity to destroy such an object right now.;
[DialogOption] text=Is there anything that can destroy it?;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_quest_prompt;
[DialogOption] text=Thanks for the information.;
nodeToConnectTo=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_phylactery_quest_prompt;
animations=stern;
statements=Hmmm... Nothing in Port Barrow, but...;
[DialogOption] text=So there is a way to destroy the Lich for good?;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_quest_start;
[DialogOption] text=Well, that's okay then. Maybe some other time.;
nodeToConnectTo=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_phylactery_quest_start;
animations=stern;
animations=stern;
animations=;
animations=stern;
statements=I think so. Yes. You may have seen a gate in the Barrow Graveyard. That leads to the city of Barrow proper.;
statements=The city once housed an immaculate church and within it, a relic of Life, overflowing with Life energy.;
statements=In fact, that's probably why the Lich targeted our little town of Barrow. If it was able to corrupt such a source...;
statements=That relic would allow us to destroy the Phylactery and banish the Lich for all of eternity.;
[DialogOption] text=Interesting. I'll get this relic for you.;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_quest;
[DialogOption] text=That sounds like a lot of work.<n=> Maybe some other time.;
nodeToConnectTo=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_phylactery_quest;
animations=happy;
animations=;
animations=stern;
statements=You would do that, traveler?;
statements=Please, take this key then. It will give you access to the city of Barrow.;
statements=But please, be careful.;
specialEffect=incDefaultNode;
[DialogOption] text=Take <itemBig=ari_barrow_key> Key to the City of Barrow.;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_quest_city_key;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_phylactery_quest_city_key;
--Spawn Barrow key
specialEffect=giveItem,ari_barrow_key,1;
specialEffect=setGlobalVar,ari_barrow_key_spawn,1;
nextNodeID=;

[DialogNode] ID=ari_gravekeeper_arianna_greeting6;
animations=happy;
statements=Hey traveler, happy to see you! How goes your quest?;
[DialogOption] text=Can you tell me more about Barrow?;
nodeToConnectTo=ari_gravekeeper_arianna_barrow_past;
[DialogOption] text=Why haven't you left?;
nodeToConnectTo=ari_gravekeeper_arianna_leave_inquiry;
[DialogOption] text=Why do you know so much about what's going on?;
nodeToConnectTo=ari_gravekeeper_arianna_knowledge_inquiry;
[DialogOption] text=I found something in the church. What is this book?;
formulaReq=moreThan:0:partyItem:shana_deadbook;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_quest_corrupt_book;
[DialogOption] text=Bye.;
nodeToConnectTo=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_greeting6_intermedium;
animations=happy;
statements=Is there anything else you'd like to chat about?;
[DialogOption] text=Can you tell me more about Barrow?;
nodeToConnectTo=ari_gravekeeper_arianna_barrow_past;
[DialogOption] text=Why haven't you left?;
nodeToConnectTo=ari_gravekeeper_arianna_leave_inquiry;
[DialogOption] text=Why do you know so much about what's going on?;
nodeToConnectTo=ari_gravekeeper_arianna_knowledge_inquiry;
[DialogOption] text=I found something in the church. What is this book?;
formulaReq=moreThan:0:partyItem:shana_deadbook;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_quest_corrupt_book;
[DialogOption] text=That's all, bye.;
nodeToConnectTo=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_barrow_past;
animations=happy;
animations=happy;
animations=stern;
animations=stern;
animations=stern;
animations=stern;
animations=stern;
animations=sad;
statements=Certainly, but there isn't too much to tell.;
statements=I actually grew up in Barrow. It was an idyllic little city, bright and joyous. Its citizens were content...;
statements=<speed=0.5>...Until recently, that is.<speed=0.8> Not too long ago, a plague began to ravage the citizens of Barrow.;
statements=Strange stirrings at night became common, and corpses would start to go missing.;
statements=Many began to flee, fearing that they would be next. And then they came.;
statements=A horde of undead swept through the city. We didn't know where they came from, or why.;
statements=But we didn't have the means to defend, and so those lucky enough to survive fled.;
statements=I fear I don't know the current state of the city, not having dared go back. I simply stay in the port now, free from the undead menace.;
[DialogOption] text=I see, thank you for telling me.;
nodeToConnectTo=ari_gravekeeper_arianna_greeting6_intermedium;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_leave_inquiry;
animations=sad;
animations=sad;
animations=sad;
animations=happy;
statements=Well, you see, I have nowhere else to go.;
statements=I grew up in Barrow and lost my home.;
statements=The others are in the same predicament. We're simply lost right now.;
statements=But we try to make do with what we have, right?
[DialogOption] text=I see, thank you for telling me.;
nodeToConnectTo=ari_gravekeeper_arianna_greeting6_intermedium;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_knowledge_inquiry;
animations=sad;
animations=sad;
animations=;
statements=It's a fascination I have.;
statements=With Barrow having been such a joyous, Life-filled place, I tended to look for something a bit... Different.;
statements=And that led me to my current knowledge. I swear it's nothing nefarious.;
[DialogOption] text=I see, thank you for telling me.;
nodeToConnectTo=ari_gravekeeper_arianna_greeting6_intermedium;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_phylactery_quest_corrupt_book;
animations=scared;
animations=scared;
animations=stern;
statements=Oh! This... This looks like...;
statements=This looks like the relic we housed in Barrow.;
statements=But it looks to have been corrupted. I've never seen something like this before.;
[DialogOption] text=Is there anything I can do with it?;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_quest_corrupt_book_purge_start;
[DialogOption] text=I see, thank you for your information. Bye.;
nodeToConnectTo=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_phylactery_quest_corrupt_book_purge_start;
animations=stern;
animations=;
statements=I'm not sure. Well, there's nothing you can do about it in Barrow, that's for sure.;
statements=Hmmm... Perhaps in one of the bigger ports? Maybe there's someone there that could help?;
specialEffect=incDefaultNode;
[DialogOption] text=Thanks, I'll search around the next time I moor.;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_quest_corrupt_book_purge_start_receipt;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_phylactery_quest_corrupt_book_purge_start_receipt;
specialEffect=setGlobalVar,arianna_gravekeeper_phylactery_quest,1;
nextNodeID=;


-----------------------------Inject dialogue into NPC in a town
[DialogOption] ID=pastor;
fReq=loc:port8;
text=I'm looking for help with this... Relic.;
formulaReq=moreThan:0:partyItem:shana_deadbook * is:1:g:arianna_gravekeeper_phylactery_quest;
newLineOfOptions=true;
nodeToConnectTo=ari_gravekeeper_rotmanuscript_cleanse_1;

[DialogNode] ID=ari_gravekeeper_rotmanuscript_cleanse_1;
animations=stern;
animations=;
animations=stern;
animations=stern;
animations=stern;
animations=;
statements=Yeah, I can certainly feel something nasty coming off of you.;
statements=I'd be happy to help, but it won't exactly come cheap.;
statements=Purging something as foul as this is quite taxing, you know.;
statements=If you can part with $10000 as compensation, I'd be happy to help.;
statements=And remember- once purged, that's it. This disgusting tome will be no more.;
statements=Although you'll have a nice new shiny tome in its place... Probably.;
[DialogOption] text=Alright, fine.;
formulaReq=moreThan:0:partyItem:shana_deadbook * moreThan:9999:m:money;
nodeToConnectTo=ari_gravekeeper_rotmanuscript_cleanse_10000_accept;
[DialogOption] text=10000 gold? You're insane. It's for a good cause.;
formulaReq=moreThan:0:partyItem:shana_deadbook;
nodeToConnectTo=ari_gravekeeper_rotmanuscript_cleanse_haggle_half_attempt;
[DialogOption] text=I can't afford that, sorry.;
formulaReq=moreThan:0:partyItem:shana_deadbook * lessThan:10000:m:money;
nodeToConnectTo=ari_gravekeeper_rotmanuscript_cleanse_poor;
[DialogOption] text=Nevermind. Bye.;
nodeToConnectTo=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_rotmanuscript_cleanse_haggle_half_attempt;
nextNodeID=ari_gravekeeper_rotmanuscript_cleanse_haggle_half_fail;
nextNodeID_fReq=mIs0:rand(1);
nextNodeID=ari_gravekeeper_rotmanuscript_cleanse_haggle_half;

[DialogNode] ID=ari_gravekeeper_rotmanuscript_cleanse_haggle_half_fail;
animations=stern;
statements=No can do. Pay up or find someone else.;
[DialogOption] text=Alright, fine. Here's your $10000.;
formulaReq=moreThan:0:partyItem:shana_deadbook * moreThan:9999:m:money;
nodeToConnectTo=ari_gravekeeper_rotmanuscript_cleanse_10000_accept;
[DialogOption] text=Nevermind. Bye.;
nodeToConnectTo=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_rotmanuscript_cleanse_10000_accept;
specialEffect=gp,-10000;
nextNodeID=ari_gravekeeper_rotmanuscript_cleansing;

[DialogNode] ID=ari_gravekeeper_rotmanuscript_cleanse_haggle_half;
animations=stern;
statements=Fine. 5000 gold. Since it's for a good cause.;
[DialogOption] text=Alright, here's your 5000 gold.;
formulaReq=moreThan:0:partyItem:shana_deadbook * moreThan:4999:m:money;
nodeToConnectTo=ari_gravekeeper_rotmanuscript_cleanse_5000_accept;
[DialogOption] text=5000 gold is still ridiculous. Lower it or forget it.;
formulaReq=moreThan:0:partyItem:shana_deadbook;
nodeToConnectTo=ari_gravekeeper_rotmanuscript_cleanse_haggle_quarter_attempt;
[DialogOption] text=Nevermind, I can't afford this.;
formulaReq=moreThan:0:partyItem:shana_deadbook * lessThan:5000:m:money;
nodeToConnectTo=;
[DialogOption] text=Nevermind. Bye.;
nodeToConnectTo=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_rotmanuscript_cleanse_haggle_quarter_attempt;
nextNodeID=ari_gravekeeper_rotmanuscript_cleanse_haggle_quarter_fail;
nextNodeID_fReq=mIs0:rand(1);
nextNodeID=ari_gravekeeper_rotmanuscript_cleanse_haggle_quarter;

[DialogNode] ID=ari_gravekeeper_rotmanuscript_cleanse_haggle_quarter_fail;
animations=stern;
statements=No can do. Pay up or find someone else.;
[DialogOption] text=Alright, fine. Here's your 5000 gold.;
formulaReq=moreThan:0:partyItem:shana_deadbook * moreThan:4999:m:money;
nodeToConnectTo=ari_gravekeeper_rotmanuscript_cleanse_5000_accept;
[DialogOption] text=Forget it. Bye.;
nodeToConnectTo=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_rotmanuscript_cleanse_5000_accept;
specialEffect=gp,-5000;
nextNodeID=ari_gravekeeper_rotmanuscript_cleansing;

[DialogNode] ID=ari_gravekeeper_rotmanuscript_cleanse_haggle_quarter;
animations=angry;
animations=stern;
statements=Look, if I go any lower it won't be worth it.;
statements=2500. That's it. Take it or leave it.;
[DialogOption] text=Alright, here's your 2500 gold.;
formulaReq=moreThan:0:partyItem:shana_deadbook * moreThan:2499:m:money;
nodeToConnectTo=ari_gravekeeper_rotmanuscript_cleanse_2500_accept;
[DialogOption] text=Nevermind, I can't afford this.;
formulaReq=moreThan:0:partyItem:shana_deadbook * lessThan:2500:m:money;
nodeToConnectTo=;
[DialogOption] text=Nevermind. Bye.;
nodeToConnectTo=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_rotmanuscript_cleanse_2500_accept;
specialEffect=gp,-2500;
nextNodeID=ari_gravekeeper_rotmanuscript_cleansing;

[DialogNode] ID=ari_gravekeeper_rotmanuscript_cleanse_poor;
animations=stern;
animations=sigh;
statements=Hrmmm... I wouldn't want this kind of foul magic to walk out of here...;
statements=Fine. Are you able to compensate 1000 gold?;
[DialogOption] text=Sure, I can do 1000 gold.;
formulaReq=moreThan:0:partyItem:shana_deadbook * moreThan:999:m:money;
nodeToConnectTo=ari_gravekeeper_rotmanuscript_cleanse_1000_accept;
[DialogOption] text=I can't afford that either, sorry.;
formulaReq=moreThan:0:partyItem:shana_deadbook * lessThan:1000:m:money;
nodeToConnectTo=ari_gravekeeper_rotmanuscript_cleanse_super_poor;
[DialogOption] text=Nevermind. Bye.;
nodeToConnectTo=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_rotmanuscript_cleanse_1000_accept;
specialEffect=gp,-1000;
nextNodeID=ari_gravekeeper_rotmanuscript_cleansing;

[DialogNode] ID=ari_gravekeeper_rotmanuscript_cleanse_super_poor;
animations=sigh;
animations=angry;
animations=stern;
statements=Urgh. Alright, alright. Fine.;
statements=I'll cleanse it for you, but I won't be happy about it.;
statements=Just remember next time when you go running off asking for favors that almost nothing in life is free.;
[DialogOption] text=Thank you!;
nodeToConnectTo=ari_gravekeeper_rotmanuscript_cleansing;

[DialogNode] ID=ari_gravekeeper_rotmanuscript_cleansing;
specialEffect=removeItemFromParty,shana_deadbook,1;
specialEffect=giveItem,ari_grimoire_divinity,1;
specialEffect=giveItem,ari_gk_foul_remnant,1;
specialEffect=setGlobalVar,arianna_gravekeeper_phylactery_quest,2;
--specialEffect=PlayFX;
--specialEffect=delay;
nextNodeID=ari_gravekeeper_rotmanuscript_post_cleansing;

[DialogNode] ID=ari_gravekeeper_rotmanuscript_post_cleansing;
animations=sigh;
animations=stern;
animations=;
animations=stern;
animations=stern;
animations=sigh;
statements=Ugh. That was worse than I expected.;
statements=It should be okay now, just... Be careful. Throw it away if you notice it acting up at all.;
statements=I'm not sure where exactly you got that thing from, but that was some bad corruption.;
statements=The corruption was even more powerful than I had anticipated. It looks like there are some remnants left.;
statements=Go ahead and take those remnants with you. I refuse to keep or house something like that.;
statements=Now if you'll excuse me, I'm going to go rest...;
--nodeToConnectTo=;




[DialogNode] ID=ari_gravekeeper_arianna_greeting7;
animations=happy;
statements=<finalTextIf=Hey there, friend!=moreThan:2:g:arianna_gravekeeper_phylactery_quest>Hey there traveler, have you found anything on that relic yet?;
[DialogOption] text=Can you tell me more about Barrow?;
nodeToConnectTo=ari_gravekeeper_arianna_barrow_past;
[DialogOption] text=Why haven't you left?;
nodeToConnectTo=ari_gravekeeper_arianna_leave_inquiry;
[DialogOption] text=Why do you know so much about what's going on?;
nodeToConnectTo=ari_gravekeeper_arianna_knowledge_inquiry;
[DialogOption] text=I did, and they cleansed the tome for me. Can we destroy the Lich with this?;
formulaReq=moreThan:0:partyItem:ari_grimoire_divinity * is:2:g:arianna_gravekeeper_phylactery_quest;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_quest_cleansed_book;
[DialogOption] text=Bye.;
nodeToConnectTo=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_phylactery_quest_cleansed_book;
animations=;
animations=stern;
animations=;
animations=stern;
statements=That relic is indeed the one that was safeguarded in the Barrow church.;
statements=If it's truly been cleansed, it should be powerful enough to banish the Lich once and for all.;
statements=But be absolutely certain before you use it-;
statements=Once the Lich is banished, there's no way that it'll ever return.;
[DialogOption] text=Thank you for the information. I'll be careful in how I handle this.;
nodeToConnectTo=;
bottomOption=true;




--Requires grimoire_unlock 1
[DialogNode] ID=ari_gravekeeper_phylactery_greeting;
animations=;
animations=happy;
statements=And look at who it is. Come back to finish the job, eh?;
statements=Lucky for me that you don't have what it takes to be rid of me forever!;
[DialogOption] text=What?! How can you communicate?;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_communicate;
[DialogOption] text=And why shouldn't I just throw this little Phylactery<n=>into the ocean?;
newLineOfOptions=true;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_threaten;
[DialogOption] text=Actually, I think I have exactly what I need to be rid<n=> of you for good.;
formulaReq=moreThan:0:partyItem:ari_grimoire_divinity * moreThan:1:g:arianna_gravekeeper_phylactery_quest;
newLineOfOptions=true;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_destroy;
[DialogOption] text=I don't have time for this, bye.;
nextNodeID=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_phylactery_communicate;
animations=angry;
animations=sly;
animations=stern;
statements=Of course I can communicate you dolt.<n=>I'm a mighty Lich!;
statements=All you've managed to do is delay the inevitable, but I'll be back.;
statements=Not in your lifetime, but I'll certainly be back.;
[DialogOption] text=And why shouldn't I just throw this little Phylactery<n=> into the ocean?;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_threaten;
[DialogOption] text=Yeah, but this relic should be able to get rid of<n=> you for good.;
formulaReq=moreThan:0:partyItem:ari_grimoire_divinity * moreThan:1:g:arianna_gravekeeper_phylactery_quest;
newLineOfOptions=true;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_destroy;
[DialogOption] text=I have no desire to deal with you, bye.;
nextNodeID=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_phylactery_threaten;
animations=angry;
animations=sly;
statements=Whoa, whoa, whoa. Now that won't do anyone any good.<n=>I certainly won't die even if resurrected at the bottom of an ocean, but it most definitely won't be pleasant.;
statements=Look, what say we come to a compromise here?;
[DialogOption] text=A compromise?;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_compromise;
[DialogOption] text=I don't need to compromise, and this relic should be<n=> enough to be rid of you for good.;
formulaReq=moreThan:0:partyItem:ari_grimoire_divinity * moreThan:1:g:arianna_gravekeeper_phylactery_quest;
newLineOfOptions=true;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_destroy;
[DialogOption] text=I don't deal with ilk of your nature.;
nextNodeID=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_phylactery_compromise;
animations=sly;
statements=That's right. A compromise.<n=>You fetch me some material and I'll give you a way to harness some powerful dark magic.;
--specialEffect=incDefaultNode;
specialEffect=setGlobalVar,grimoire_unlock,2;
[DialogOption] text=Go on...;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_grimoire_introduction;
[DialogOption] text=No, I won't submit to your whim, Lich. This relic will<n=> get rid of you for good.;
formulaReq=moreThan:0:partyItem:ari_grimoire_divinity * moreThan:1:g:arianna_gravekeeper_phylactery_quest;
newLineOfOptions=true;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_destroy;
[DialogOption] text=Absolutely not. Goodbye.;
nextNodeID=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_phylactery_compromise_return;
animations=sly;
statements=That's right. A compromise.<n=>You fetch me some material and I'll give you a way to harness some powerful dark magic.;
[DialogOption] text=Go on...;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_grimoire_introduction;
[DialogOption] text=No, I won't submit to your whim, Lich. This relic will<n=> get rid of you for good.;
formulaReq=moreThan:0:partyItem:ari_grimoire_divinity * moreThan:1:g:arianna_gravekeeper_phylactery_quest;
newLineOfOptions=true;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_destroy;
[DialogOption] text=Absolutely not. Goodbye.;
nextNodeID=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_phylactery_grimoire_introduction;
animations=sly;
statements=If you bring me, say, 150 skulls, I'll give you a means to manipulate Ruin.;
[DialogOption] text=Something like these 150 skulls?;
formulaReq=moreThan:149:d:ari_BoneCount;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_grimoire_purchase;
[DialogOption] text=I'm interested. I'll get you your bones, Lich.;
newLineOfOptions=true;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_grimoire_accept;
[DialogOption] text=What kind of skulls?;
newLineOfOptions=true;
nodeToConnectTo=ari_gravekeeper_arianna_bone_type;
[DialogOption] text=No, I won't submit to your whim, Lich. This relic will<n=> get rid of you for good.;
formulaReq=moreThan:0:partyItem:ari_grimoire_divinity * moreThan:1:g:arianna_gravekeeper_phylactery_quest;
newLineOfOptions=true;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_destroy;
[DialogOption] text=I don't think so. Goodbye.;
nextNodeID=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_bone_type;
animations=stern;
statements=Skulls. Skulls! Any kind of skulls will do. Even damaged ones. Broken skulls work juuuuust fine.;
[DialogOption] text=Something like these 150 skulls?;
formulaReq=moreThan:149:d:ari_BoneCount;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_grimoire_purchase;
[DialogOption] text=Alright. I'll get you your bones, Lich.;
newLineOfOptions=true;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_grimoire_accept;
[DialogOption] text=No, I won't submit to your whim, Lich. This relic will<n=> get rid of you for good.;
formulaReq=moreThan:0:partyItem:ari_grimoire_divinity * moreThan:1:g:arianna_gravekeeper_phylactery_quest;
newLineOfOptions=true;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_destroy;
[DialogOption] text=I don't think so. Goodbye.;
nextNodeID=;
bottomOption=true;

--Requires grimoire_unlock 2
[DialogNode] ID=ari_gravekeeper_phylactery_greeting1;
animations=;
statements=Ehehehe. Look at who's back. Have you come to make a compromise?;
[DialogOption] text=A compromise?;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_compromise_return;
[DialogOption] text=No, I've come to destroy you for good with this relic.;
formulaReq=moreThan:0:partyItem:ari_grimoire_divinity * moreThan:1:g:arianna_gravekeeper_phylactery_quest;
newLineOfOptions=true;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_destroy;
[DialogOption] text=Absolutely not. Goodbye.;
nextNodeID=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_phylactery_grimoire_accept;
--specialEffect=incDefaultNode;
specialEffect=setGlobalVar,grimoire_unlock,3;
nextNodeID=;

[DialogNode] ID=ari_gravekeeper_phylactery_greeting2;
animations=;
statements=Ehehehe. You got any skulls for me?;
[DialogOption] text=I have 150 skulls for you.;
formulaReq=moreThan:149:d:ari_BoneCount;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_grimoire_purchase;
[DialogOption] text=What kind of skulls were you looking for?;
newLineOfOptions=true;
nodeToConnectTo=ari_gravekeeper_arianna_bone_type_accepted;
[DialogOption] text=Not this time, Lich. I've come to destroy you for good<n=> with this relic.;
formulaReq=moreThan:0:partyItem:ari_grimoire_divinity * moreThan:1:g:arianna_gravekeeper_phylactery_quest;
newLineOfOptions=true;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_destroy;
[DialogOption] text=I have nothing for you, Lich.;
nextNodeID=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_bone_type_accepted;
animations=stern;
statements=Skulls. Skulls! Any kind of skull will do. Even damaged ones. Broken skulls work juuuuust fine.;
[DialogOption] text=Will these 150 skulls work?;
formulaReq=moreThan:149:d:ari_BoneCount;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_grimoire_purchase;
[DialogOption] text=I don't have them yet.;
nextNodeID=;
bottomOption=true;
[DialogOption] text=No, I won't submit to your whim, Lich. This relic will<n=> get rid of you for good.;
formulaReq=moreThan:0:partyItem:ari_grimoire_divinity * moreThan:1:g:arianna_gravekeeper_phylactery_quest;
newLineOfOptions=true;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_destroy;
[DialogOption] text=I have nothing for you, Lich.;
nextNodeID=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_phylactery_grimoire_purchase;
animations=;
animations=stern;
statements=Ehehehe. These are perfect. <n=>Here's a little something to help you unleash a bit of that power you've got.;
statements=Now get lost.;
specialEffect=setGlobalVar,grimoire_unlock,4;
[DialogOption] text=Take <itemBig=ari_craft_grimoire> Grimoire Crafting Kit.;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_grimoire_receipt;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_phylactery_grimoire_receipt;
--Spawn grimoire kit
specialEffect=giveItem,ari_craft_grimoire,1;
specialEffect=removeItemFromParty,skull,150;
specialEffect=setGlobalVar,grimoire_necronomicon_spawn,1;
nextNodeID=;

[DialogNode] ID=ari_gravekeeper_phylactery_greeting3;
animations=;
statements=Leave me alone, damn it. I need to bide time until my recovery and you serve no more purpose.;
[DialogOption] text=Your recovery?;
newLineOfOptions=true;
nodeToConnectTo=ari_gravekeeper_arianna_lich_recovery_question;
[DialogOption] text=You won't recover, Lich. This time, I've come to destroy<n=> you for good with this relic.;
formulaReq=moreThan:0:partyItem:ari_grimoire_divinity * moreThan:1:g:arianna_gravekeeper_phylactery_quest;
newLineOfOptions=true;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_destroy;
[DialogOption] text=Goodbye.;
nextNodeID=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_lich_recovery_question;
animations=;
animations=;
animations=;
animations=;
animations=;
statements=Ehehehe. You supplied me with everything I could ever need for my recovery.;
statements=What else did you think I was going to do with that pile of skulls you brought me?;
statements=Your foolish ambitions have doomed Eral.;
statements=Perhaps luckily for you, you won't be around to see what comes next!;
statements=Now scoot along, my little puppet. You've served your purpose for me.;
[DialogOption] text=You won't recover, Lich. This time, I've come to destroy<n=> you for good with this relic.;
formulaReq=moreThan:0:partyItem:ari_grimoire_divinity * moreThan:1:g:arianna_gravekeeper_phylactery_quest;
newLineOfOptions=true;
nodeToConnectTo=ari_gravekeeper_arianna_phylactery_destroy;
[DialogOption] text=What have I done?;
nextNodeID=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_phylactery_destroy;
animations=;
animations=;
statements=What? WHAT?! No! How did you get that? That relic should have been unsalvageable!;
statements=You couldn't have gotten in! You couldn't have! You'll ruin it... You'll ruin everything! Give that back!;
[DialogOption] text=Goodbye, Lich. This time, for good.;
newLineOfOptions=true;
nodeToConnectTo=ari_gravekeeper_arianna_lich_end_dialogue;
[DialogOption] text=I'll spare you... For now.;
nextNodeID=;
bottomOption=true;

[DialogNode] ID=ari_gravekeeper_arianna_lich_end_dialogue;
animations=;
statements=No! No no no no! NOOOOO-;
nextNodeID=ari_gravekeeper_arianna_lich_end;

[DialogNode] ID=ari_gravekeeper_arianna_lich_end;
--specialEffect=incDefaultNode;
specialEffect=setGlobalVar,grimoire_unlock,5;
specialEffect=setGlobalVar,arianna_gravekeeper_phylactery_quest,3;
specialEffect=trigger,ari_gk_destroy_lich_altar;
nextNodeID=;


--Yokaze boss dialog
[DialogNode] ID=shana_gravekeeper_yokaze_intro;
nextNodeID_fReq=m:landingPartySize-1;
nextNodeID=shana_gravekeeper_yokaze_intro_1;
nextNodeID=shana_gravekeeper_yokaze_intro_1a_solo;

[DialogNode] ID=shana_gravekeeper_yokaze_intro_1;
--speaker=shana_plaguebow_boss_ari_gravekeeper_city_path_;
animations=happy;
animations=sly;
animations=stern;
statements=Greetings, travellers. I haven't had visitors grace this valley for a while.;
statements=Weren't you warned away from this place?;
statements=Regardless, I do hope you're more prepared than the last batch was.;
nextNodeID_fReq=party:mh_livia;
nextNodeID=shana_gravekeeper_yokaze_intro_1a_livia;
nextNodeID=shana_gravekeeper_yokaze_intro_2;

[DialogNode] ID=shana_gravekeeper_yokaze_intro_1a_solo; --for solo
--speaker=shana_plaguebow_boss_ari_gravekeeper_city_path_;
animations=happy;
animations=sly;
animations=stern;
animations=sad;
statements=Greetings, traveller. I haven't had a visitor grace this valley for a while.;
statements=Weren't you warned away from this place?;
statements=Regardless, I do hope you're more prepared than the last batch was...<p>;
statements=...But if you're alone, you probably aren't. I'd love to see you prove me wrong, though.;
nextNodeID_fReq=party:mh_livia;
nextNodeID=shana_gravekeeper_yokaze_intro_1a_livia;
nextNodeID=shana_gravekeeper_yokaze_intro_2;

[DialogNode] ID=shana_gravekeeper_yokaze_intro_1a_livia; --cross content with Livia from Prominence's mod Mage Hunter. Bloody good time, check it out if you haven't.
speakerOverride=mh_livia;
animations=sad;
statements=You... you're undead? How are you even speaking?;
nextNodeID=shana_gravekeeper_yokaze_intro_2a_livia;

[DialogNode] ID=shana_gravekeeper_yokaze_intro_2a_livia; --cross content with Livia from Prominence's mod Mage Hunter. Bloody good time, check it out if you haven't.
speakerOverride=shana_plaguebow_boss_ari_gravekeeper_city_path_;
animations=sad;
statements=Yes. I'm undead, but somehow whatever reanimated me kept most of my mental faculties intact.;
nextNodeID=shana_gravekeeper_yokaze_intro_3;

[DialogNode] ID=shana_gravekeeper_yokaze_intro_2;
animations=sad;
statements=And yes, I'm undead, but somehow whatever reanimated me kept most of my mental faculties intact.;
nextNodeID=shana_gravekeeper_yokaze_intro_3;

[DialogNode] ID=shana_gravekeeper_yokaze_intro_3;
animations=angry;
animations=angry;
statements=<speed=1.2>Free will not included, of course!;
statements=<speed=1.5>Can't leave, can't free my own spirit, can't even pick a fight or have a chat with the other <color=DarkOliveGreen><p>undead<color=Black> around here, but I can be bored out of my exposed skull!;
nextNodeID=shana_gravekeeper_yokaze_intro_4;

[DialogNode] ID=shana_gravekeeper_yokaze_intro_4;
speakerOverride=shana_plaguebow_boss_ari_gravekeeper_city_path_;
animations=sly;
statements=<speed=1.0>Do you have any questions for me? Please ask, it's been far too long since I've had a conversation with anyone.;
[DialogOption] text=The air here feels wrong.;
animations=sigh;
nodeToConnectTo=shana_gravekeeper_yokaze_intro_5;
[DialogOption] text=What happened to you?;
animations=sad;
newLineOfOptions=true;
nodeToConnectTo=shana_gravekeeper_yokaze_intro_6;
[DialogOption] text=I have a message from Taidon.;
animations=meh;
newLineOfOptions=true;
formulaReq=g:shana_taidon_message-g:shana_done_gravekeeper_yokaze_intro_taidon_message;
nodeToConnectTo=shana_gravekeeper_yokaze_intro_taidon_message;
[DialogOption] text=Could you please let us leave?;
animations=scared;
newLineOfOptions=true;
nodeToConnectTo=shana_gravekeeper_yokaze_intro_7;
[DialogOption] text=I don't speak to the undead.;
animations=stern;
newLineOfOptions=true;
nodeToConnectTo=shana_gravekeeper_yokaze_intro_8; --Fair enough.....

[DialogNode] ID=shana_gravekeeper_yokaze_intro_4a; --this connects back if youve asked at least one question
speakerOverride=shana_plaguebow_boss_ari_gravekeeper_city_path_;
animations=sly;
statements=<speed=1.0>Anything else you'd like to ask?;
[DialogOption] text=The air here feels wrong.;
animations=sigh;
formulaReq=1 - g:shana_done_gravekeeper_yokaze_intro_5;
nodeToConnectTo=shana_gravekeeper_yokaze_intro_5;
[DialogOption] text=What happened to you?;
animations=sad;
newLineOfOptions=true;
formulaReq=1 - g:shana_done_gravekeeper_yokaze_intro_6;
nodeToConnectTo=shana_gravekeeper_yokaze_intro_6;
[DialogOption] text=I have a message from Taidon.;
animations=meh;
newLineOfOptions=true;
formulaReq=g:shana_taidon_message-g:shana_done_gravekeeper_yokaze_intro_taidon_message;
nodeToConnectTo=shana_gravekeeper_yokaze_intro_taidon_message;
[DialogOption] text=Could you please let us leave?;
animations=scared;
newLineOfOptions=true;
formulaReq=1 - g:shana_done_gravekeeper_yokaze_intro_7;
nodeToConnectTo=shana_gravekeeper_yokaze_intro_7;
[DialogOption] text=I have no more questions - let's get this over with.;
animations=stern;
newLineOfOptions=true;
nodeToConnectTo=shana_gravekeeper_yokaze_intro_8a; --start fight


[DialogNode] ID=shana_gravekeeper_yokaze_intro_5; --air is wrong
animations=sigh;
animations=stern;
animations=happy;
statements=You can feel it too, can't you? The <iconBig=icon_gravekeeper_rot>Rot hangs thick in the air here.;
statements=I've seen others keep it at bay with the help of a <iconBig=classIcon_sage>Sage's spells or a <iconBig=classIcon_minstrel>Minstrel's song, but anything that dispels the stuff should work.;
statements=I'm too far gone for that, though. Please don't try to cure me. The previous batch of would-be healers ended up being cured of breathing instead.;
specialEffect=modGlobalVar,shana_done_gravekeeper_yokaze_intro_5,1;
nextNodeID=shana_gravekeeper_yokaze_intro_4a;

[DialogNode] ID=shana_gravekeeper_yokaze_intro_6; --what happened to you?
animations=angry;
animations=angry;
animations=sad;
animations=sad;
statements=<speed=1.2>You probably have a better idea than I do! I can't even investigate because the Rot won't let me leave this valley from either end!;
statements=<speed=1.5>I sought a single night's lodging in that damned town on the way to Jascias, ignored the innkeeper's suggestion to lodge somewhere else - he didn't tell me why, of course, and woke up to a horde of undead!;
statements=<speed=0.8>In hindsight, I really should have listened to him. The next thing I knew, I was forced to...<p> well...<p> to turn my ancestral bow against the fleeing citizens of Barrow.;
statements=<speed=0.7>I tried my hardest to resist, but my body just wasn't my own.;
specialEffect=modGlobalVar,shana_done_gravekeeper_yokaze_intro_6,1;
nextNodeID_fReq=party:reeve;
nextNodeID=shana_gravekeeper_yokaze_intro_6a_reeve;
nextNodeID_fReq=party:mh_livia;
nextNodeID=shana_gravekeeper_yokaze_intro_6b_livia;
nextNodeID=shana_gravekeeper_yokaze_intro_4a;

[DialogNode] ID=shana_gravekeeper_yokaze_intro_6a_reeve; --more cross content
speakerOverride=reeve;
animations=angry;
statements=...;
nextNodeID_fReq=party:mh_livia;
nextNodeID=shana_gravekeeper_yokaze_intro_6b_livia;
nextNodeID=shana_gravekeeper_yokaze_intro_4a;

[DialogNode] ID=shana_gravekeeper_yokaze_intro_6b_livia; --more cross content
speakerOverride=mh_livia;
animations=angry;
animations=angry;
animations=stern;
statements=...;
statements=Well, then.;
statements=It seems I have one more mage to hunt.;
nextNodeID=shana_gravekeeper_yokaze_intro_6c;

[DialogNode] ID=shana_gravekeeper_yokaze_intro_6c; --more cross content
speakerOverride=shana_plaguebow_boss_ari_gravekeeper_city_path_;
animations=happy;
animations=sly;
animations=happy;
statements=If you survive this, I'll be cheering you on from wherever I end up!;
statements=Most of my mortal wealth is buried in that grave over to my right...<p> or your left.;
statements=Can't buy you drinks as I am now, but that should do the job!;
nextNodeID=shana_gravekeeper_yokaze_intro_4a;

[DialogNode] ID=shana_gravekeeper_yokaze_intro_taidon_message;
animations=happy;
animations=meh;
animations=sad;
animations=stern;
statements=I've already heard this message a few times, but it's always nice.;
statements=Keeps me sane, you know?;
statements=Honestly, I don't know if I even deserve that much anymore.;
statements=If you end up being the one to put me to rest, please thank him for me.;
specialEffect=modGlobalVar,shana_done_gravekeeper_yokaze_intro_taidon_message,1;
specialEffect=modGlobalVar,shana_yokaze_reply,1;
nextNodeID=shana_gravekeeper_yokaze_intro_4a;

[DialogNode] ID=shana_gravekeeper_yokaze_intro_7; --let us leave?
animations=sigh;
statements=I'm sorry, but that isn't possible. I literally can't do that.;
specialEffect=modGlobalVar,shana_done_gravekeeper_yokaze_intro_7,1;
nextNodeID=shana_gravekeeper_yokaze_intro_4a;

[DialogNode] ID=shana_gravekeeper_yokaze_intro_8; --player skips
animations=happy;
statements=Fair enough! I'll let my arrows do the talking, then.;
nextNodeID=enemyInitiateCombat;

[DialogNode] ID=shana_gravekeeper_yokaze_intro_8a; --normal combat start
animations=sigh;
statements=Don't hold back. I'd rather lose than win...<p> but I can't just roll over for you.;
nextNodeID=enemyInitiateCombat;






















---sets gVar as 1 when triggered by actorreaction death
[GlobalTrigger] numID=0; aliasID=ari_dead_abomination_trigger;
topX=0;topY=0;btmX=0;btmY=0;
triggerImmediatelyOnEnteringZone=False; triggeredByElement=none; travelModeOnly=False; triggerOnPlayerActorOnly=False; onlyExecuteOnce=False; triggerForEveryStepInArea=False; disableOnZoneEntry=False; fReq=1;
[GlobalTriggerEffect] ID=ari_dead_abomination_trigger; effectID=setGlobalVar; sValue=ari_dead_abomination; sValue2=; bValue1=False; bValue2=False; fValue=1; delay=0; xValue=0; yValue=0;

[GlobalTrigger] numID=1; aliasID=ari_dead_lich_trigger;
topX=0;topY=0;btmX=0;btmY=0;
triggerImmediatelyOnEnteringZone=False; triggeredByElement=none; travelModeOnly=False; triggerOnPlayerActorOnly=False; onlyExecuteOnce=False; triggerForEveryStepInArea=False; disableOnZoneEntry=False; fReq=1;
[GlobalTriggerEffect] ID=ari_dead_lich_trigger; effectID=setGlobalVar; sValue=ari_dead_lich; sValue2=; bValue1=False; bValue2=False; fValue=1; delay=0; xValue=0; yValue=0;

[GlobalTrigger] numID=0; aliasID=ari_dead_ascetic_trigger;
topX=0;topY=0;btmX=0;btmY=0;
triggerImmediatelyOnEnteringZone=False; triggeredByElement=none; travelModeOnly=False; triggerOnPlayerActorOnly=False; onlyExecuteOnce=False; triggerForEveryStepInArea=False; disableOnZoneEntry=False; fReq=1;
[GlobalTriggerEffect] ID=ari_dead_ascetic_trigger; effectID=setGlobalVar; sValue=ari_dead_ascetic; sValue2=; bValue1=False; bValue2=False; fValue=1; delay=0; xValue=0; yValue=0;
